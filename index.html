<!DOCTYPE html>
<html>
  <head>
    <title>Ruby Has Types</title>
    <meta charset="utf-8">
    <meta name="description" content="Ruby Has Types">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="js/lib/jquery-1.8.0.min.js"></script>
    <script src="js/lib/highlight-7.1.min.js"></script>
    <script src="js/lib/jquerytypewriter.js"></script>
    <script src="js/lib/underscore-1.3.3.min.js"></script>
    <script src="js/lib/jquery.touchSwipe.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/sizer.js"></script>
    <script src="js/bullets.js"></script>
    <script src="js/trickster.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/custom.js"></script>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/styles.css">
    <script>
      $(window).load(function() {
        TricksterTimer = TricksterTimer(TricksterDefaultConfig,{});
        TricksterTimer.setup();

        Trickster = TricksterLoader(TricksterDefaultConfig,{});
        Trickster.load(TricksterTimer);

      });
    </script>
    
  </head>
  <body><div id="contents">
    <section class='TITLE'>
<h1>Ruby Types</h1>
<h2>Turns Out™ They are Better Than Using Hashes and Strings for Everything</h2>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >class Product</span>
<span class='line line-2 ' >  attr_reader :name, :price</span>
<span class='line line-3 ' >  def initialize(name,price)</span>
<span class='line line-4 ' >    @name = name</span>
<span class='line line-5 ' >    @price = price</span>
<span class='line line-6 ' >  end</span>
<span class='line line-7 ' >end</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >macbook      = Product.new("Macbook"     , 999.10)</span>
<span class='line line-2 ' >macbook2     = Product.new("Macbook 2"   , "999.10")</span>
<span class='line line-3 ' >power_supply = Product.new("Power Brick" , 20.20)</span>
<span class='line line-4 ' >lazer_watch  = Product.new("JBIWLC-5000" , 100000.1234)</span>
<span class='line line-5 ' ></span>
<span class='line line-6 ' >#</span></code></pre>
</section>
<section class='SECTION'>
<h1>Are <code>macbook</code> and <code>macbook2</code> the same price?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby,' data-strikeouts='' data-callout-lines='1,2'><div class='lines-callout'><span class='line line-1 line-callout' >macbook      = Product.new("Macbook"     , 999.10)</span>
<span class='line line-2 line-callout' >macbook2     = Product.new("Macbook 2"   , "999.10")</span>
</div><span class='line line-3 ' >power_supply = Product.new("Power Brick" , 20.20)</span>
<span class='line line-4 ' >lazer_watch  = Product.new("JBIWLC-5000" , 100000.1234)</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' ></span>
<span class='line line-2 ' >macbook.price == macbook2.price</span>
<span class='line line-3 ' ></span>
<span class='line line-4 ' ># => false</span>
<span class='line line-5 ' ></span></code></pre>
</section>
<section class='SECTION'>
<h1>How much for a Macbook and a Power Brick?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby,' data-strikeouts='' data-callout-lines='1,3'><div class='lines-callout'><span class='line line-1 line-callout' >macbook      = Product.new("Macbook"     , 999.10)</span>
</div><span class='line line-2 ' >macbook2     = Product.new("Macbook 2"   , "999.10")</span>
<div class='lines-callout'><span class='line line-3 line-callout' >power_supply = Product.new("Power Brick" , 20.20)</span>
</div><span class='line line-4 ' >lazer_watch  = Product.new("JBIWLC-5000" , 100000.1234)</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >macbook.price + power_supply.price</span>
<span class='line line-2 ' ></span>
<span class='line line-3 ' ># => 1019.3000000000001 </span></code></pre>
</section>
<section class='SECTION'>
<h1>Where do I get 34/100<sup>ths</sup> of a cent?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >require 'bigdecimal'</span>
<span class='line line-2 ' ></span>
<span class='line line-3 ' >class Price</span>
<span class='line line-4 ' ></span>
<span class='line line-5 ' >  attr_reader :price</span>
<span class='line line-6 ' ></span>
<span class='line line-7 ' >  def initialize(price)</span>
<span class='line line-8 ' >    @price = BigDecimal.new(price.to_s)</span>
<span class='line line-9 ' >  end</span>
<span class='line line-10 ' ></span>
<span class='line line-11 ' >  def to_s</span>
<span class='line line-12 ' >    @price.to_s("F")</span>
<span class='line line-13 ' >  end</span>
<span class='line line-14 ' >end</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >macbook      = Product.new("Macbook"     , Price.new(999.10))</span>
<span class='line line-2 ' >macbook2     = Product.new("Macbook 2"   , Price.new("999.10"))</span>
<span class='line line-3 ' >power_supply = Product.new("Power Brick" , Price.new(20.20))</span>
<span class='line line-4 ' ></span>
<span class='line line-5 ' >#</span></code></pre>
</section>
<section class='SECTION'>
<h1>Are <code>macbook</code> and <code>macbook2</code> the same price?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >class Price</span>
<span class='line line-2 ' >  def ==(other)</span>
<span class='line line-3 ' >    @price == other.price</span>
<span class='line line-4 ' >  end</span>
<span class='line line-5 ' >end</span>
<span class='line line-6 ' ></span>
<span class='line line-7 ' >macbook.price == macbook2.price</span>
<span class='line line-8 ' ></span>
<span class='line line-9 ' ># => true</span>
<span class='line line-10 ' ></span></code></pre>
</section>
<section class='SECTION'>
<h1>How much for a Macbook and a Power Brick?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >class Price</span>
<span class='line line-2 ' >  def +(other)</span>
<span class='line line-3 ' >    Price.new(@price + other.price)</span>
<span class='line line-4 ' >  end</span>
<span class='line line-5 ' >end</span>
<span class='line line-6 ' ></span>
<span class='line line-7 ' >macbook.price + power_supply.price</span>
<span class='line line-8 ' ></span>
<span class='line line-9 ' ># => 1019.3</span></code></pre>
</section>
<section class='SECTION'>
<h1>Where do I get 34/100<sup>ths</sup> of a cent?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby,' data-strikeouts='' data-callout-lines='4,5,6'><span class='line line-1 ' >class Price</span>
<span class='line line-2 ' >  def initialize(price)</span>
<span class='line line-3 ' >    @price = BigDecimal.new(price.to_s)</span>
<div class='lines-callout'><span class='line line-4 line-callout' >    if @price.round(2) != @price</span>
<span class='line line-5 line-callout' >      raise "#{price} is not a price"</span>
<span class='line line-6 line-callout' >    end</span>
</div><span class='line line-7 ' >  end</span>
<span class='line line-8 ' >end</span>
<span class='line line-9 ' ></span>
<span class='line line-10 ' >lazer_watch  = Product.new("JBIWLC-5000" , Price.new(100000.1234))</span>
<span class='line line-11 ' ></span>
<span class='line line-12 ' ># => RuntimeError: 100000.1234 is not a price</span></code></pre>
</section>
<section class='SECTION'>
<h1>What's half-off $15.55?</h1>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >class Price</span>
<span class='line line-2 ' >  def /(other)</span>
<span class='line line-3 ' >    Price.new(@price / other)</span>
<span class='line line-4 ' >  end</span>
<span class='line line-5 ' >end</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >Price.new("15.55") / 2</span>
<span class='line line-2 ' ></span>
<span class='line line-3 ' ># => RuntimeError: 0.7775E1 is not a price</span></code></pre>
</section>
<section class='SECTION'>
<h1>Had we used floats or strings, </h1>
<h2>somewhere that half a cent would get rounded.</h2>
</section>
<section class='SECTION'>
<h1>Would you know where?</h1>
</section>
<section class='IMAGE'>
<img src='superman_3.jpg'>
</section>
<section class='IMAGE'>
<img src='office_space.jpg'>
</section>
<section class='SECTION'>
<h1><code>Price</code> is a <em>Data Type</em></h1>
</section>
<section class='BULLETS'>
<h1>Data Type</h1>
<ul>
<li>Set of allowed values</li>
<li>Set of allowed operations</li>
</ul>
</section>
<section class='BULLETS'>
<h1>Half-off</h1>
<ul>
<li>15.55 is an allowed value</li>
<li>Divide by an integer is an allowed operation</li>
<li>7.775—the result of dividing 15.55 by 2—is <strong>not</strong> an allowed value</li>
</ul>
</section>
<section class='SECTION'>
<h1>We haven't thought through our “half-off” feature</h1>
</section>
<section class='CODE'>
<pre><code class='ruby,' data-strikeouts='' data-callout-lines='4'><span class='line line-1 ' >class Price</span>
<span class='line line-2 ' >  def /(other)</span>
<span class='line line-3 ' >    quotient = @price / other</span>
<div class='lines-callout'><span class='line line-4 line-callout' >    Price.new(quotient.round(2,:banker))</span>
</div><span class='line line-5 ' >  end</span>
<span class='line line-6 ' >end</span></code></pre>
</section>
<section class='BULLETS'>
<h1>Questions</h1>
<ul>
<li>When dividing prices, what rounding method do we use?</li>
<li><strong>A:</strong> <code>Price</code></li>
<li>Can there be negative prices?</li>
<li><strong>A:</strong> <code>Price</code></li>
<li>etc.</li>
</ul>
</section>
<section class='SECTION'>
<h1>But the world wants nothing but Strings!!!!</h1>
</section>
<section class='CODE'>
<pre><code class='json' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >{</span>
<span class='line line-2 ' >  "product": {</span>
<span class='line line-3 ' >    "name": "MacBook",</span>
<span class='line line-4 ' >    "price": "999.999"</span>
<span class='line line-5 ' >  }</span>
<span class='line line-6 ' >}</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='sql' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >INSERT INTO </span>
<span class='line line-2 ' >  products(name,price)</span>
<span class='line line-3 ' >VALUES</span>
<span class='line line-4 ' >  ("MacBook",999.999)</span></code></pre>
</section>
<section class='CODE'>
<pre><code class='ruby' data-strikeouts='' data-callout-lines=''><span class='line line-1 ' >product.update_attribute(:price,"999.999")</span>
<span class='line line-2 ' ></span>
<span class='line line-3 ' >#</span></code></pre>
</section>
<section class='BULLETS'>
<h1>Strings & Hashes are for <em>Serialization</em></h1>
<ul>
<li>Your database</li>
<li>APIs</li>
<li>User Input</li>
<li>Files</li>
</ul>
</section>
<section class='SECTION'>
<h1>They are not the basis of sound logic</h1>
</section>
<section class='SECTION'>
<h1>They are not the basis of testable code</h1>
</section>
<section class='SECTION'>
<h1>They are not the basis of reliable systems</h1>
</section>
<section class='SECTION'>
<h1></h1>
</section>

    </div>
    <aside id="timer">
      <div id="clock">
        <span class="hours">
          <span id="hour">0</span> :
        </span>
        <span class="minutes">
          <span id="minute">00</span> 
        </span>
        <span class="seconds"> : 
          <span id="second">00</span>
        </span>
      </div>
      <div id="controls">
        <a id="stop" href="#" onclick="return TricksterTimer.stop();">◼</a>
        <a id="play" href="#" onclick="return TricksterTimer.play();">▶</a>
        <a id="pause" href="#" onclick="return TricksterTimer.pause();">▮▮</a>
      </div>
    </aside>    
  </body>
</html>
